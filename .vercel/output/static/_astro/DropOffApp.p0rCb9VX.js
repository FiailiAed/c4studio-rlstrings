import{u as x,a as l,b as m,j as e,C as p,c as f}from"./api.dMCnM2hZ.js";import{r as h}from"./index.DYrVU9rO.js";function u({orderId:s}){const r=s&&(s.startsWith("j")||s.startsWith("k")),t=x(l.orders.getOrderById,r?{orderId:s}:"skip"),i=m(l.orders.updateOrderStatus),[a,n]=h.useState(!1);if(!r)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-8",children:e.jsxs("div",{className:"max-w-md text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-red-400 mb-4",children:"Invalid Order ID"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"The order ID in the QR code is not valid. Please scan again or contact support."})]})});if(t===void 0)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-8",children:e.jsx("div",{className:"text-white text-2xl",children:"Loading..."})});if(t===null)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-8",children:e.jsxs("div",{className:"max-w-md text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-red-400 mb-4",children:"Order Not Found"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"We couldn't find this order. Please check the QR code or contact support."})]})});const o=async()=>{n(!0);try{await i({orderId:s,newStatus:"dropped_off"})}catch(d){console.error("Failed to confirm drop-off:",d),alert("Failed to confirm drop-off. Please try again.")}finally{n(!1)}},c=t.status!=="paid";return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-8",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:c?e.jsxs("div",{className:"bg-green-900/20 border-2 border-green-700 p-8 rounded-2xl",children:[e.jsx("h1",{className:"text-4xl font-bold text-green-400 mb-4",children:"âœ“ Stick Received"}),e.jsxs("p",{className:"text-slate-300 mb-2",children:["Dropped off on: ",new Date(t.droppedOffAt).toLocaleString()]}),e.jsxs("p",{className:"text-slate-300 mb-4",children:["Current status: ",e.jsx("strong",{className:"text-white uppercase",children:t.status.replace("_"," ")})]}),e.jsxs("p",{className:"text-slate-400",children:["We'll send a text to ",e.jsx("strong",{className:"text-white",children:t.phone||t.email})," when it's ready for pickup!"]})]}):e.jsxs("div",{className:"bg-slate-800 border-2 border-slate-700 p-8 rounded-2xl",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-6",children:"Confirm Stick Drop-off"}),e.jsxs("div",{className:"bg-black/30 p-6 rounded-lg mb-6 space-y-3",children:[e.jsxs("p",{className:"text-slate-400",children:["Customer: ",e.jsx("strong",{className:"text-white",children:t.customerName})]}),e.jsxs("p",{className:"text-slate-400",children:["Item: ",e.jsx("strong",{className:"text-white",children:t.itemDescription})]}),e.jsxs("div",{className:"pt-2 border-t border-slate-700",children:[e.jsx("p",{className:"text-slate-400 text-sm mb-1",children:"Pickup Code:"}),e.jsx("span",{className:"text-pink-500 font-mono text-3xl font-bold tracking-widest",children:t.pickupCode})]})]}),e.jsx("button",{onClick:o,disabled:a,className:"w-full py-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white text-xl font-bold rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50",children:a?"Confirming...":"Confirm Drop-off"})]})})})}const b=new p("https://kindly-beagle-851.convex.cloud");function N({orderId:s}){return e.jsx(f,{client:b,children:e.jsx(u,{orderId:s})})}export{N as default};

import{u as p,a as m,d as b,j as e,C as g,c as f}from"./api.dMCnM2hZ.js";import{r as c}from"./index.DYrVU9rO.js";function j(){const l=p(m.inventory.getStorefront),x=b(m.stripe.createProductAndSync),[s,r]=c.useState({name:"",price:"",category:"mesh"}),[a,n]=c.useState(null),[i,d]=c.useState(!1),u=async t=>{t.preventDefault(),d(!0),n(null);const o=Math.round(parseFloat(s.price)*100);try{await x({name:s.name,priceInCents:o,category:s.category}),n({success:!0}),r({name:"",price:"",category:"mesh"})}catch(h){n({success:!1,error:h.message})}finally{d(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-white",children:"Inventory Manager"}),e.jsx("a",{href:"/internal/admin",className:"px-4 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600 transition-colors",children:"← Dashboard"})]}),e.jsxs("div",{className:"bg-slate-800 border-2 border-slate-700 p-8 rounded-2xl mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Add New Product"}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-white font-medium mb-2",children:"Product Name"}),e.jsx("input",{type:"text",value:s.name,onChange:t=>r({...s,name:t.target.value}),required:!0,minLength:3,placeholder:"e.g., STX Stallion 700",className:"w-full px-4 py-2 bg-slate-900 border border-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-white font-medium mb-2",children:"Price (USD)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-2 text-slate-400 text-lg",children:"$"}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",value:s.price,onChange:t=>r({...s,price:t.target.value}),required:!0,placeholder:"24.99",className:"w-full pl-8 pr-4 py-2 bg-slate-900 border border-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-white font-medium mb-2",children:"Category"}),e.jsx("div",{className:"flex gap-6",children:["head","shaft","mesh"].map(t=>e.jsxs("label",{className:"flex items-center text-white cursor-pointer",children:[e.jsx("input",{type:"radio",name:"category",value:t,checked:s.category===t,onChange:o=>r({...s,category:o.target.value}),className:"mr-2 accent-purple-600"}),t.charAt(0).toUpperCase()+t.slice(1)]},t))})]}),e.jsx("button",{type:"submit",disabled:i,className:"w-full py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50",children:i?"Adding to Stripe...":"Add Product to Stripe"})]}),a&&e.jsx("div",{className:`mt-4 p-4 rounded-lg ${a.success?"bg-green-900/20 border border-green-700 text-green-400":"bg-red-900/20 border border-red-700 text-red-400"}`,children:a.success?"✓ Product added to Stripe and synced!":`✗ Error: ${a.error}`})]}),e.jsxs("div",{className:"bg-slate-800 border-2 border-slate-700 p-8 rounded-2xl",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Current Inventory"}),l?l.length===0?e.jsx("p",{className:"text-slate-400",children:"No items in inventory yet."}):e.jsx("div",{className:"space-y-3",children:l.map(t=>e.jsxs("div",{className:"bg-slate-900 border border-slate-700 p-4 rounded-lg flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-white font-bold",children:t.name}),e.jsxs("span",{className:"text-slate-400 text-sm ml-3",children:["(",t.category,")"]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-slate-500 text-xs",children:["Stock: ",t.stock]})})]},t._id))}):e.jsx("p",{className:"text-slate-400",children:"Loading inventory..."})]})]})})}const v=new g("https://kindly-beagle-851.convex.cloud");function w(){return e.jsx(f,{client:v,children:e.jsx(j,{})})}export{w as default};

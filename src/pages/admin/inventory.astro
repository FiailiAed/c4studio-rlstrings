---
import DashboardLayout from '../../layouts/DashboardLayout.astro';
import { getConvexClient } from '../../lib/convex';
import { api } from '../../../convex/_generated/api';
import InventoryManager from '../../components/InventoryManager';
import IslandLoader from '../../components/IslandLoader.astro';

const items = await getConvexClient().query(api.inventory.listInventory, {});
const convexUrl = import.meta.env.PUBLIC_CONVEX_URL;
---

<DashboardLayout
  title="RL Strings | Admin Dashboard - Inventory"
  activePage="Inventory"
  description="Inventory Management"
>
  <div class="mx-auto max-w-7xl px-4 py-16 sm:px-6 lg:px-8">
    <IslandLoader>
      <InventoryManager client:load initialItems={items} convexUrl={convexUrl} />
    </IslandLoader>
  </div>
</DashboardLayout>

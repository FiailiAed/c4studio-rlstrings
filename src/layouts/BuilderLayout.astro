---
import '../styles/global.css';
import Header from '../components/Header.astro';

interface Props {
  title?: string;
  description?: string;
}

const {
  title = 'RL Strings | Pocket Builder',
  description = 'Build your custom lacrosse stick'
} = Astro.props;

const { pathname } = Astro.url;

const tabs = [
  { href: '/', label: 'Home', icon: 'home' },
  { href: '/shop', label: 'Shop', icon: 'shop' },
  { href: '/shop/builder', label: 'Builder', icon: 'builder' },
  { href: '/order', label: 'Orders', icon: 'orders' },
];
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta name="description" content={description} />
    <title>{title}</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&family=JetBrains+Mono&display=swap" rel="stylesheet" />
  </head>

  <body class="bg-black text-white min-h-screen overflow-x-hidden">
    <!-- Fixed Radial Glow Background -->
    <div class="fixed inset-0 pointer-events-none -z-10" aria-hidden="true">
      <div class="radial-glow-top-left"></div>
      <div class="radial-glow-bottom-right"></div>
    </div>

    <!-- Desktop: reuse standard Header -->
    <div class="hidden md:block">
      <Header />
    </div>

    <!-- Mobile: minimal top bar -->
    <header class="md:hidden fixed top-0 left-0 right-0 z-50 p-2">
      <div class="glass-dark rounded-xl px-3 py-2 flex items-center justify-between">
        <a href="/" class="flex items-center gap-2">
          <div class="w-8 h-8 bg-red-600 rounded flex items-center justify-center">
            <svg class="w-5 h-5 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
              <circle cx="12" cy="12" r="10" />
              <line x1="12" y1="2" x2="12" y2="22" />
              <line x1="2" y1="12" x2="22" y2="12" />
            </svg>
          </div>
          <span class="font-black italic uppercase text-sm">RL Strings</span>
        </a>
        <a href="/shop" class="text-xs text-neutral-400 hover:text-red-500 font-semibold transition-colors">
          &larr; Back to Shop
        </a>
      </div>
    </header>

    <main class="pt-20 md:pt-28 pb-24 md:pb-12 px-3 sm:px-4">
      <slot />
    </main>

    <!-- Mobile Bottom Tab Nav -->
    <nav class="fixed bottom-0 inset-x-0 z-50 md:hidden glass-dark border-t border-neutral-800" style="padding-bottom: env(safe-area-inset-bottom, 0px);">
      <div class="flex items-center justify-around px-2 py-2">
        {tabs.map(tab => {
          const active = pathname === tab.href;
          return (
            <a
              href={tab.href}
              class={`flex flex-col items-center gap-0.5 min-w-[2.5rem] min-h-[2.75rem] justify-center rounded-lg px-2 py-1 transition-colors ${
                active ? 'text-red-500' : 'text-neutral-500 hover:text-neutral-300'
              }`}
            >
              {tab.icon === 'home' && (
                <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
                  <polyline points="9 22 9 12 15 12 15 22" />
                </svg>
              )}
              {tab.icon === 'shop' && (
                <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="9" cy="21" r="1" /><circle cx="20" cy="21" r="1" />
                  <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6" />
                </svg>
              )}
              {tab.icon === 'builder' && (
                <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z" />
                </svg>
              )}
              {tab.icon === 'orders' && (
                <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                  <polyline points="14 2 14 8 20 8" />
                  <line x1="16" y1="13" x2="8" y2="13" />
                  <line x1="16" y1="17" x2="8" y2="17" />
                  <polyline points="10 9 9 9 8 9" />
                </svg>
              )}
              <span class="text-[10px] font-semibold">{tab.label}</span>
            </a>
          );
        })}
      </div>
    </nav>
  </body>
</html>

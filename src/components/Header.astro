---
import {
  SignedIn,
  SignedOut,
  UserButton
} from '@clerk/astro/components';

const { pathname } = Astro.url;
---

<header class="bg-gray-50 backdrop-blur-md border-b border-white/10 sticky top-0 z-50">
  <div class="container mx-auto px-4 py-4">
    <div class="flex items-center justify-between">
      <!-- Logo / Brand -->
      <a href="/" class="text-2xl font-bold bg-gradient-to-r from-rose-950 to-red-800 bg-clip-text text-transparent">
        RL Strings
      </a>

      <!-- Navigation -->
      <nav class="hidden md:flex items-center gap-6">
        <a
          href="/"
          class:list={[
            "hover:text-red-700 transition-colors",
            pathname === '/' ? 'text-red-700 font-semibold' : 'text-rose-400'
          ]}
        >
          Home
        </a>

        <!-- Admin/Internal links only for authenticated users -->
        <SignedIn>
          <a
            href="/internal/debug-stripe"
            class:list={[
              "hover:text-cyan-400 transition-colors",
              pathname.startsWith('/internal') ? 'text-cyan-400 font-semibold' : 'text-gray-500'
            ]}
          >
            Debug
          </a>
        </SignedIn>
      </nav>

      <!-- Auth Controls -->
      <div class="flex items-center gap-4">
        <!-- Authenticated: UserButton with name -->
        <SignedIn>
          <UserButton
            showName={true}
            userProfileMode="modal"
            appearance={{
              elements: {
                userButtonBox: "flex-row-reverse",
                userButtonOuterIdentifier: "text-white",
              }
            }}
          />
        </SignedIn>

        <!-- Unauthenticated: Sign In/Up Buttons -->
        <SignedOut>
          <a href="/sign-in" class="text-rose-950 hover:text-red-600 transition-colors">
            Sign In
          </a>
          <a href="/sign-up" class="bg-red-700 hover:bg-gradient-to-r from-rose-950 to-red-800 text-white px-4 py-2 rounded-lg transition-colors">
            Sign Up
          </a>
        </SignedOut>
      </div>
    </div>
  </div>
</header>
